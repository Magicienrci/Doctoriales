import{r as t,j as e,b as P}from"./app-Dpq9Pdya.js";import S from"./AdminDashboard-CBjVhSBu.js";function T({users:x,userInformations:h}){const[d,m]=t.useState(25),[n,l]=t.useState(1),[o,g]=t.useState(""),[j,u]=t.useState(x),i=j.filter(s=>s.id>1&&s.email.toLowerCase().includes(o.toLowerCase())),b=Math.ceil(i.length/d),f=i.slice((n-1)*d,n*d),y=s=>{m(parseInt(s.target.value)),l(1)},v=s=>{g(s.target.value),l(1)},[c,p]=t.useState(""),N=async s=>{try{(await P.post("/admin/toggle-payment-status",{userId:s})).status===200&&(u(C=>C.map(r=>r.id===s?{...r,payement:r.payement==="Validé"?"en attente":"Validé"}:r)),p(""))}catch(a){console.error("Failed to update payment status:",a),p("Failed to update payment status. Please try again.")}};return e.jsxs(S,{children:[c&&e.jsx("p",{className:"error-message",children:c}),e.jsxs("div",{className:"tableaucontainer",children:[e.jsxs("div",{className:"tableautitle",children:["Liste des Utilisateurs   ",e.jsxs("span",{style:{marginLeft:"20px",fontSize:"15px",fontWeight:"bolder"},children:["Total : ",h.length]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"indices",children:[e.jsxs("div",{className:"indices1",children:[e.jsx("p",{children:"Rechercher par email : "}),e.jsx("label",{children:e.jsx("input",{type:"text",value:o,onChange:v,placeholder:"Entrez l'email",style:{marginLeft:"10px",padding:"5px"}})})]}),e.jsxs("div",{className:"indices2",children:[e.jsx("p",{children:"Afficher par : "}),e.jsx("label",{children:e.jsxs("select",{value:d,onChange:y,children:[e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:i.length,children:"Tout"})]})})]})]}),e.jsx("div",{className:"tablecontainer",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"tablehead",children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Nom"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Email"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Statut Paiement"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Validation"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Informations"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textTransform:"uppercase"},children:s.name.toUpperCase()}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:s.email}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textTransform:"uppercase"},children:s.payement.toUpperCase()}),e.jsx("td",{className:"validation",children:e.jsx("button",{onClick:()=>N(s.id),className:"validationbtn",children:s.payement==="Validé"?"Refuser":"Valider"})}),e.jsx("td",{className:"validation2",children:"OK"})]},s.id))})]})}),e.jsx("div",{style:{marginTop:"10px"},children:Array.from({length:b},(s,a)=>e.jsx("button",{onClick:()=>l(a+1),style:{margin:"0 5px",padding:"5px 10px",backgroundColor:n===a+1?"#007bff":"#f0f0f0",color:n===a+1?"#fff":"#000",border:"none",borderRadius:"4px",cursor:"pointer"},children:a+1},a+1))})]})]})}export{T as default};
