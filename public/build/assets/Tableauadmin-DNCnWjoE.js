import{r as a,j as e,b as k}from"./app-DcmQJ0rK.js";import L from"./AdminDashboard-DikvI_y5.js";import{G as I}from"./iconBase-DlzhwlKu.js";function E(t){return I({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 320 192 192m0 128 128-128"},child:[]}]})(t)}function V({users:t,userInformations:u}){const[l,j]=a.useState(25),[d,n]=a.useState(1),[h,f]=a.useState(""),[g,v]=a.useState(t),[x,m]=a.useState(""),[o,N]=a.useState(null),c=g.filter(s=>s.id>1&&s.email.toLowerCase().includes(h.toLowerCase())),b=Math.ceil(c.length/l),y=c.slice((d-1)*l,d*l),C=s=>{j(parseInt(s.target.value)),n(1)},S=s=>{f(s.target.value),n(1)},P=async s=>{try{(await k.post("/admin/toggle-payment-status",{userId:s})).status===200&&(v(U=>U.map(r=>r.id===s?{...r,payement:r.payement==="Validé"?"en attente":"Validé"}:r)),m(""))}catch(i){console.error("Failed to update payment status:",i),m("Failed to update payment status. Please try again.")}},p=s=>{N(i=>i===s?null:s)};return e.jsxs(L,{children:[x&&e.jsx("p",{className:"error-message",children:x}),e.jsxs("div",{className:"tableaucontainer",children:[e.jsxs("div",{className:"tableautitle",children:["Liste des Utilisateurs",e.jsxs("span",{style:{marginLeft:"20px",fontSize:"15px",fontWeight:"bolder"},children:["Total : ",t.length-1]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"indices",children:[e.jsxs("div",{className:"indices1",children:[e.jsx("p",{children:"Rechercher par email : "}),e.jsx("label",{children:e.jsx("input",{type:"text",value:h,onChange:S,placeholder:"Entrez l'email",style:{marginLeft:"10px",padding:"5px"}})})]}),e.jsxs("div",{className:"indices2",children:[e.jsx("p",{children:"Afficher par : "}),e.jsx("label",{children:e.jsxs("select",{value:l,onChange:C,children:[e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:c.length,children:"Tout"})]})})]})]}),e.jsx("div",{className:"tablecontainer",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"tablehead",children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Nom"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Email"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Statut Paiement"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Validation"}),e.jsx("th",{style:{border:"1px solid #ddd",padding:"8px"},children:"Informations"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textTransform:"uppercase"},children:s.name.toUpperCase()}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px"},children:s.email}),e.jsx("td",{style:{border:"1px solid #ddd",padding:"8px",textTransform:"uppercase"},children:s.payement.toUpperCase()}),e.jsx("td",{className:"validation",children:e.jsx("button",{onClick:()=>P(s.id),className:"validationbtn",children:s.payement==="Validé"?"Refuser":"Valider"})}),e.jsx("td",{className:"validation2",children:e.jsx("button",{className:"validationbtn2",onClick:()=>p(s.id),children:"voir infos"})})]},s.id))})]})}),e.jsx("div",{style:{marginTop:"10px"},children:Array.from({length:b},(s,i)=>e.jsx("button",{onClick:()=>n(i+1),style:{margin:"0 5px",padding:"5px 10px",backgroundColor:d===i+1?"#007bff":"#f0f0f0",color:d===i+1?"#fff":"#000",border:"none",borderRadius:"4px",cursor:"pointer"},children:i+1},i+1))}),o&&e.jsx("div",{className:"user-info",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>p(o),className:"close-icon",children:e.jsx(E,{})}),u.filter(s=>s.id===o).map(s=>e.jsxs("div",{className:"user-details",children:[e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Sexe"}),e.jsx("div",{className:"user-detailsinofosright",children:s.sexe})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Inscrit(e) en tant que"}),e.jsx("div",{className:"user-detailsinofosright",children:s.statut})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Nom"}),e.jsx("div",{className:"user-detailsinofosright",children:s.nom})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Prénoms"}),e.jsx("div",{className:"user-detailsinofosright",children:s.prenoms})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Contact"}),e.jsx("div",{className:"user-detailsinofosright",children:s.contact})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Université"}),e.jsx("div",{className:"user-detailsinofosright",children:s.ecole_origine})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"UMRI | UFR"}),e.jsx("div",{className:"user-detailsinofosright",children:s.umri_ufr})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"N° carte étudiant"}),e.jsx("div",{className:"user-detailsinofosright",children:s.n_etudiant})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Présence au gala"}),e.jsx("div",{className:"user-detailsinofosright",children:s.gala?"Oui":"Non"})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Sera accompagné(e)"}),e.jsx("div",{className:"user-detailsinofosright",children:s.acc?"Oui":"Non"})]}),e.jsxs("div",{className:"user-detailsinofos",children:[e.jsx("div",{className:"user-detailsinofosleft",children:"Nombre d'invités"}),e.jsx("div",{className:"user-detailsinofosright",children:s.n_acc})]})]},s.id))]})})]})]})}export{V as default};
